import{_ as n,o as s,c as a,a as p,e as t}from"./app-iph3vjA0.js";const e={},o=t(`<h3 id="_01-新建src-api文件夹" tabindex="-1"><a class="header-anchor" href="#_01-新建src-api文件夹" aria-hidden="true">#</a> 01-新建src/api文件夹</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>api
 - ajax.js
 - index.vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_02-新建axios-js文件" tabindex="-1"><a class="header-anchor" href="#_02-新建axios-js文件" aria-hidden="true">#</a> 02-新建axios.js文件</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>

<span class="token comment">//封装ajax</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>params<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>type<span class="token operator">=</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> promise<span class="token punctuation">;</span>
  type <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.判断请求方式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token operator">===</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//1.1拼接字符串</span>
      <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
      Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token operator">===</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
          str<span class="token operator">+=</span>value<span class="token operator">+</span><span class="token string">&#39;=&#39;</span><span class="token operator">+</span>params<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
          str<span class="token operator">+=</span>value<span class="token operator">+</span><span class="token string">&#39;=&#39;</span><span class="token operator">+</span>params<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">&#39;&amp;&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//1.2完整路径</span>
      url<span class="token operator">+=</span><span class="token string">&#39;?&#39;</span><span class="token operator">+</span>str<span class="token punctuation">;</span>
      <span class="token comment">//1.3发送get请求</span>
      promise <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">===</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//1.3发送post请求</span>
      promise <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//2.返回请求结果</span>
    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_03-新建index-js文件" tabindex="-1"><a class="header-anchor" href="#_03-新建index-js文件" aria-hidden="true">#</a> 03-新建index.js文件</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> ajax <span class="token keyword">from</span> <span class="token string">&#39;./ajax&#39;</span>

<span class="token comment">//发送请求</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getPhoneCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">phone</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">&#39;/api/getPhoneCode&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>phone<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_04-api调用" tabindex="-1"><a class="header-anchor" href="#_04-api调用" aria-hidden="true">#</a> 04-api调用</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> xxxxx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;api/index.vue (文件路径)&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,8);function c(i,l){return s(),a("div",null,[p("more"),o])}const r=n(e,[["render",c],["__file","Axios.html.vue"]]);export{r as default};
